import ItemAuxContainer from "./components/ItemAuxContainer.js";
import React, { useState } from "react";
import Search from "./components/Search.js"
import Fuse from "fuse.js";
import ItemList from "./data/items.json"

function App() {

  const [data, setData] = useState(ItemList);

  const searchData = (pattern) => {
    if (!pattern) {
      setData(ItemList);
      return;
    }

    const fuse = new Fuse(data, {
      keys: ["namespace_id"],
    });

    const result = fuse.search(pattern);
    const matches = [];
    if (!result.length) {
      setData([]);
    } else {
      result.forEach(({ aux }) => {
        matches.push(aux);
      });
      setData(matches);
    }
  };

  const ItemData = require('../src/data/items.json');

  return (
    <div>
      <Search
        placeholder="Search"
        onChange={(e) => searchData(e.target.value)}
      />
      <div className="Container">
        {ItemData.items.map((aux) => (
          <ItemAuxContainer {...aux} key={aux.name} />
        ))}
      </div>
    </div>

  );
}

export default App;
